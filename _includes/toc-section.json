{%- comment -%}
Select the entire collection for the language from "_config.yml".  We include
"um" as a dummy collection to show how to use "elsif" to select a second one.
{%- endcomment -%}
{%- if include.language == 'en' -%}
  {%- assign chapters = site.en -%}
{%- elsif include.language == 'um' -%}
  {%- assign chapters = site.um -%}
{%- endif -%}

{%- comment -%}Search to order pages (because Jekyll does not support lookup by key).{%- endcomment -%}
{%- for lesson in include.coll -%}
  {%- assign outer = forloop.index -%}
  {%- for chap in chapters -%}
    {%- comment -%}If they match...{%- endcomment -%}
    {%- if lesson == chap.slug -%}
      "{{lesson}}": {"title": "{{chap.title}}", "index": {{outer}}, "type": "{{include.type}}"}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}
  {% unless forloop.last %},
  {% endunless %}
{%- endfor -%}
