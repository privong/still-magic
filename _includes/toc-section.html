{% comment %}
Display a section of the table of contents.

- language: the two-letter code for the page language (e.g., 'en' for English).
- coll: the corresponding collection.
- class: the CSS class to apply to the list.
- title: the TOC section title.
- toc: a section of the table of contents from _config.yml.
{% endcomment %}

{% comment %} Figure out the path to the root of the collection. {% endcomment %}
{% if page.root %}{% assign rootpath = "." %}{% else %}{% assign rootpath = ".." %}{% endif %}

{% if include.title %}<p><strong>{{include.title}}</strong></p>{% endif %}
<ol class="{{include.class}}">
  {% comment %}Search to find this page (because Jekyll does not support lookup by key).{% endcomment %}
  {%- for lesson in include.toc -%}
    {%- for chap in include.coll -%}
      {% comment %}If there's a match, add a link to the generated ToC.{% endcomment %}
      {%- if lesson == chap.slug -%}
        <li>{% if page.slug == chap.slug %}<strong>{% endif %}
          <a href="{{rootpath}}/{{chap.slug}}/" class="toc">{{chap.title}}</a>
          {% if page.slug == chap.slug %}</strong>{% endif %}
        </li>
        {% break %}
      {%- endif -%}
    {%- endfor -%}
  {%- endfor -%}
</ol>
